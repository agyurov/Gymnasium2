---
title: "notes"
output:
  pdf_document: default
  html_document: default
  word_document: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE,message = FALSE, warning = FALSE,fig.height=2.5)
# source("main.R")
load(".RData")
require(xtable)
require(knitr)
```


# Summary

718 girls, 388 boys. Respondents fb 406, ig 192, sc 508. Had dig edu 298, had not dig edu 898.

```{r}
fx = lapply(fbb,table)
fy = lapply(fba,table)
fxb = lapply(fbb[fbb$q3.1_gender=="mand",],table)
fxg = lapply(fbb[fbb$q3.1_gender=="kvinde",],table)
fyb = lapply(fba[fba$q3.1_gender=="mand",],table)
fyg = lapply(fba[fba$q3.1_gender=="kvinde",],table)

ix = lapply(igb,table)
iy = lapply(iga,table)
ixb = lapply(igb[igb$q3.1_gender=="mand",],table)
ixg = lapply(igb[igb$q3.1_gender=="kvinde",],table)
iyb = lapply(iga[iga$q3.1_gender=="mand",],table)
iyg = lapply(iga[iga$q3.1_gender=="kvinde",],table)

sx = lapply(scb,table)
sy = lapply(sca,table)
sxb = lapply(scb[scb$q3.1_gender=="mand",],table)
sxg = lapply(scb[scb$q3.1_gender=="kvinde",],table)
syb = lapply(sca[sca$q3.1_gender=="mand",],table)
syg = lapply(sca[sca$q3.1_gender=="kvinde",],table)

print(str(dfo))
```

```{r}
x = dfo[dfo$q3.1_gender == "mand",]
y = dfo[dfo$q3.1_gender == "kvinde",]
par(mfrow=c(1,3))
barplot(rbind(table(x$q1.1_usefb),table(y$q1.1_usefb)),beside=T,col=rainbow(2,start=.55,end=0,alpha = .3),main="fb")
barplot(rbind(table(x$q1.2_useig),table(y$q1.2_useig)),beside=T,col=rainbow(2,start=.55,end=0,alpha = .3),main="ig")
barplot(rbind(table(x$q1.3_usesc),table(y$q1.3_usesc)),beside=T,col=rainbow(2,start=.55,end=0,alpha = .3),main="sc")
```

```{r}
brief.plot.ol = function(what){
  par(mfrow=c(1,3))
  barplot(unlist(fx[what]),main=paste0("FB ",what))
  barplot(unlist(fy[what]),add=T)

  barplot(unlist(ix[what]),main=paste0("IG ",what))
  barplot(unlist(iy[what]),add=T)

  barplot(unlist(sx[what]),main=paste0("SC ",what))
  barplot(unlist(sy[what]),add=T)
}

brief.plot = function(what){
  par(mfrow=c(1,3),mar=c(4,2,4,1))
  barplot(rbind(unlist(fxb[what]),unlist(fxg[what])),beside=T,main=paste0("FB ",what),
          col = rainbow(2,start=.55,end=0,alpha = .3),
          names.arg = 1:length(unlist(fxb[what])))
  barplot(rbind(unlist(fyb[what]),unlist(fyg[what])),beside=T,add=T,
          col = rainbow(2,start=.55,end=0,alpha = .7),
          names.arg = 1:length(unlist(fxb[what])))

  barplot(rbind(unlist(ixb[what]),unlist(ixg[what])),beside=T,main=paste0("IG ",what),
          col = rainbow(2,start=.55,end=0,alpha = .3),
          names.arg = 1:length(unlist(fxb[what])))
  barplot(rbind(unlist(iyb[what]),unlist(iyg[what])),beside=T,add=T,
          col = rainbow(2,start=.55,end=0,alpha = .7),
          names.arg = 1:length(unlist(fxb[what])))
  
  barplot(rbind(unlist(sxb[what]),unlist(sxg[what])),beside=T,main=paste0("SC ",what),
          col = rainbow(2,start=.55,end=0,alpha = .3),
          names.arg = 1:length(unlist(fxb[what])))
  barplot(rbind(unlist(syb[what]),unlist(syg[what])),beside=T,add=T,
          col = rainbow(2,start=.55,end=0,alpha = .7),
          names.arg = 1:length(unlist(fxb[what])))
}
```

```{r}
brief.plot("q2.1_nocare")

```

```{r}
brief.plot("q6.1_school")
```

```{r}
brief.plot("q7.1_editedprivacy")
```

```{r}
brief.plot("q8.1_freqpost")
```

```{r}
brief.plot("q8.2_freqsend")
```

```{r}
brief.plot("q8.3_freqread")
```

```{r}
brief.plot("q9.1_seecontent")
```

```{r}
brief.plot("q10.1_understand")
```

```{r}
brief.plot("q11.1_seemypost")
```

```{r}
brief.plot("q12.1_controlseemypost")
```

```{r}
brief.plot("q13.1_audience")
```

```{r}
brief.plot("q14.1_trustconn")
```

```{r}
brief.plot("q15.1_trustsell")
```

```{r}
brief.plot("q16.1_trustpriv")
```

```{r}
brief.plot("q17.1_targetme")
```

```{r}
brief.plot("q18.1_targetfr")
```

```{r}
brief.plot("q19.1_comfortsell")
```

\pagebreak

# Luca's take

## L1. Concern, Q2 ~ Q7

### Q2/Q7 ~ Q7/Q2 + DigEdu + platform

Without interactions Q7 ~ ...

```{r}
# my.barplot(luca1$resp$beta,namez = names(luca1$resp$beta),col=grey.colors(2,start=0,end=.4,alpha = .5))
kable(sort(luca1$resp$beta, decreasing = T),digits = 2,caption="Coefficients")
```

With interactions Q7 ~ ...

```{r}
# my.barplot(luca1o2$resp$beta,namez = names(luca1o2$resp$beta),col=grey.colors(2,start=0,end=.4,alpha = .5))
kable(sort(luca1o2$resp$beta, decreasing = T),digits = 2,caption="Coefficients")
```

Without interactions Q2 ~ ...

```{r}
# my.barplot(luca2$resp$beta,namez = names(luca2$resp$beta),col=grey.colors(2,start=0,end=.4,alpha = .5))
kable(sort(luca2$resp$beta, decreasing = T),digits = 2,caption="Coefficients")
```

With interactions Q2 ~ ...

```{r}
# my.barplot(luca2o2$resp$beta,namez = names(luca2o2$resp$beta),col=grey.colors(2,start=0,end=.4,alpha = .5))
kable(sort(luca2o2$resp$beta, decreasing = T),digits = 2,caption="Coefficients")
```


### Q2 ~ Q7 + DigEdu + platform + demographic data

Without interactions Q7 ~ ...

```{r}
luca4
```

With interactions Q7 ~ ...

```{r}
# my.barplot(luca4o2$resp$beta,namez = names(luca4o2$resp$beta),col=grey.colors(2,start=0,end=.4,alpha = .5))
kable(sort(luca4o2$resp$beta,decreasing = T),digits = 2,caption="Coefficients")
```

Without interactions Q2 ~ ...

```{r}
# my.barplot(luca3$resp$beta,namez = names(luca3$resp$beta),col=grey.colors(2,start=0,end=.4,alpha = .5))
kable(sort(luca3$resp$beta,decreasing = T),digits = 2,caption="Coefficients")
```

With interactions Q2 ~ ...

```{r}
# my.barplot(luca3o2$resp$beta,namez = names(luca3o2$resp$beta),col=grey.colors(2,start=0,end=.4,alpha = .5))
kable(luca3o2$resp$beta,digits = 2,caption="Coefficients")
```

## L2. Knowledge?! 

Knowledge is defined as a factor whose levels are the combinations of the constituent questions (9-10, 11-12). For each pair of the questions 9,10 and 11-12 we create the derivative variables K1 and K2 such that for Q9 response i and Q10 response j the factor value of K1 is ij. K_1, K_2 have 16 elements each (4x4). In addition, based on the questions 9-19 we can build a wide range of derivative variables such as:

* knowledge (ignorance)
* awareness (naiveness)
* mindfulness (recklessness) etc

Below are tested the following 6 knowledge definitions:

* k1 = q9 & q10
* k2 = q11 & q 10
* k3 = q9 & q11
* k4 = q9 & q12
* k5 = q10 & q11
* k6 = q10 & q12

Below are shown only the models for k1 and k2. The remaining knowledge definitions are tested in the same way but are not reported. Out of all tested models only knowledge definition k2 appears significant. Models with interactions are computationally costly and often do not converge correctly. They require manual inspection.


### Q2, Q7 ~ K1/K2 + DigEdu + platform

Without interactions Q2, Q7 ~ K1 + digedu + platform

```{r}
mluca1$q2.1_nocare$beta
kable(sort(mluca1$q7.1_editedprivacy$beta,decreasing = T),digits = 2,caption = "Q7 Coefficients")
```

With interactions Q2, Q7 ~ K1 + digedu + platform

```{r}
cat("q2.1_nocare constant model\n")
cat("q7.1_editedprivacy convergence issue...\n")
```

Without interactions Q2, Q7 ~ K2 + digedu + platform

```{r}
cat("q2.1_nocare constant model\n")
kable(sort(mluca2$q7.1_editedprivacy$beta, decreasing = T),digits = 2,caption = "Q7 Coefficients")
```

With interactions Q2, Q7 ~ K2 + digedu + platform

```{r}
cat("q2.1_nocare constant model\n")
kable(sort(mluca2o2$q7.1_editedprivacy$beta,decreasing = T),digits = 2,caption = "Q7 Coefficients")
```

### Q2, Q7 ~ K1/K2 + DigEdu + platform + demographic data

Without interactions Q2, Q7 ~ K1/K2 + digedu + platform + demo.dat

Nothing here at all